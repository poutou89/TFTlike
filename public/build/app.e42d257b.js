/*! For license information please see app.e42d257b.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[524],{633:()=>{document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("register_type_form_plainPassword_first"),t=document.getElementById("register_type_form_plainPassword_second"),n=document.getElementById("register-btn");function r(){e.value&&e.value===t.value?n.disabled=!1:n.disabled=!0}e&&t&&n&&(e.addEventListener("input",r),t.addEventListener("input",r))})},1738:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n(2675),n(9463),n(2259),n(5700),n(6280),n(6918),n(8107),n(8706),n(2008),n(113),n(1629),n(3418),n(4423),n(4346),n(3792),n(8598),n(2062),n(4114),n(4782),n(9572),n(3288),n(2010),n(6033),n(2892),n(7945),n(4185),n(3851),n(1278),n(9432),n(6099),n(8940),n(7495),n(906),n(8781),n(7357),n(1699),n(7764),n(1761),n(5440),n(1392),n(2762),n(8992),n(4520),n(2577),n(3949),n(1454),n(3500),n(2953),n(6031),document.addEventListener("DOMContentLoaded",function(){var e,t,n;if(document.body.classList.contains("page-match")){var r=(window.ASSET_BASE||"/").replace(/\/?$/,"/"),l='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="160" viewBox="0 0 128 160"><defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%25" stop-color="%231a1a24"/><stop offset="100%25" stop-color="%23222233"/></linearGradient></defs><rect fill="url(%23g)" width="128" height="160"/><circle cx="64" cy="64" r="28" fill="%23333a48"/><rect x="34" y="106" width="60" height="30" rx="6" fill="%23333a48"/><text x="50%25" y="148" dominant-baseline="middle" text-anchor="middle" fill="%239aa0aa" font-family="Arial, sans-serif" font-size="10">Aucun portrait</text></svg>',s=function(e){var t=String(e||"");return t?/^(?:https?:|data:|blob:)/i.test(t)||t.startsWith("/")?t:t.startsWith("images/")?"/"+t:r+t.replace(/^\/+/,""):""},u=document.getElementById("board"),d=document.getElementById("battle-log"),m=document.getElementById("hud-allies"),f=document.getElementById("hud-enemies"),v=document.getElementById("hud-allies-title"),p=document.getElementById("hud-enemies-title"),g=document.getElementById("btn-start"),y=document.getElementById("btn-pause"),h=document.getElementById("btn-reset"),b=document.getElementById("btn-music");if(u&&d&&m&&f&&g&&y&&h){var S=JSON.parse((null===(e=document.getElementById("replay-json"))||void 0===e?void 0:e.textContent)||"{}"),w=JSON.parse((null===(t=document.getElementById("allies-json"))||void 0===t?void 0:t.textContent)||"[]"),E=JSON.parse((null===(n=document.getElementById("enemies-json"))||void 0===n?void 0:n.textContent)||"[]");if(S&&Array.isArray(S.initial)){console.debug("REPLAY:",S,"allyCount=",S.initial.filter(function(e){return"ally"===e.team}).length,"enemyCount=",S.initial.filter(function(e){return"enemy"===e.team}).length);var L=new Map,_=null,A=0,T=null,x=!0,I=!1,M=window.BGM_URL;M&&((T=new Audio(M)).loop=!0,T.preload="auto",T.volume=0),b&&(T||(b.disabled=!0,b.title="Aucune musique disponible"),b.setAttribute("aria-pressed",x?"true":"false"),b.addEventListener("click",function(){x=!x,b.setAttribute("aria-pressed",x?"true":"false"),T&&(x?T.play().catch(function(){}):T.pause())}));var k=function(e,t){return u.querySelector('.cell[data-x="'.concat(e,'"][data-y="').concat(t,'"]'))},C=S.ally_username||S.ally_name||F(w)||S.player_ally||R(),O=S.enemy_username||S.enemy_name||F(E)||S.player_enemy||R();v&&(v.textContent=C),p&&(p.textContent=O);var j=new Map,q=$(w),B=$(E),N=Array.isArray(window.ITEMS)?window.ITEMS:[],P=function(e){var t=String(e||"").trim();if(!t)return"";var n=t.match(/\.[a-z0-9]+$/i),r=!!n,a=r?t.replace(/\.[a-z0-9]+$/i,""):t;return"images/items/"+(/^\d+$/.test(a)?"fc"+a:a)+(r?n[0]:".png")};g.addEventListener("click",function(){_||(_=setInterval(K,400)),T&&(x=!0,b&&b.setAttribute("aria-pressed","true"),T.currentTime=0,T.play().then(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(T){I=!1;var n=T.volume,r=performance.now(),a=function(i){var o=Math.min(1,(i-r)/e);T.volume=n+(t-n)*o,o<1&&requestAnimationFrame(a)};requestAnimationFrame(a)}}(450,.5)}).catch(function(e){console.debug("bgm play blocked",e)}))}),y.addEventListener("click",function(){_&&(clearInterval(_),_=null),H()}),h.addEventListener("click",function(){_&&(clearInterval(_),_=null),A=0,V(),T&&(H(),T.currentTime=0)}),V()}else console.warn("No replay provided")}else console.warn("Match UI missing",{board:u,logEl:d,hudA:m,hudE:f,btnStart:g,btnPause:y,btnReset:h})}function H(){T&&T.pause()}function D(e){if(e){var t=document.createElement("div");t.textContent=e,d.appendChild(t),d.scrollTop=d.scrollHeight}}function R(){var e=["Airi","Mika","Yuna","Nia","Hana","Suki","Luna","Momo","Rin","Saya","Kira","Nova","Zoe","Aya"],t=["Fox","Star","Bloom","Dash","Wave","Heart","Spark","Song","Dream","Moon","Sky","Shine"];return e[Math.floor(Math.random()*e.length)]+" "+t[Math.floor(Math.random()*t.length)]}function F(e){if(e){if(Array.isArray(e)){var t=e[0]||{};return t.owner_name||t.username||t.player||t.user||t.owner||void 0}return e.owner_name||e.username||e.player||e.user||e.owner||void 0}}function J(){var e=function(e){return c(L.values()).filter(function(t){return t.team===e}).map(function(e){var t=Array.isArray(e.families)?e.families:[],n=Array.isArray(e.items)?e.items:[],r=Array.isArray(window.ITEMS)?window.ITEMS:[],a=function(e){if(null==e)return null;var t=Number(e);return!isFinite(t)||t<=0?null:(t>1&&(t/=100),Math.round(100*t))},i=n.map(function(e){if("string"==typeof e){var t=e.trim();if(/^(?:https?:|data:|blob:|\/)/i.test(t)||t.includes("/"))return{img:t};var n=t.replace(/\.[a-z0-9]+$/i,""),a=r.find(function(e){return String(e.id)===String(n)});return!a&&/^\d+$/.test(n)&&(a=r.find(function(e){return String(e.id)==="fc"+n})),a||{img:P(t)}}if("number"==typeof e){var i=String(e);return r.find(function(e){return String(e.id)===i})||r.find(function(e){return String(e.id)==="fc"+i})||{img:P(e)}}return!e||!e.id||e.img||e.icon||e.image?e||{}:r.find(function(t){return String(t.id)===String(e.id)})||e}),o=null!=e.armor&&Number(e.armor)>0?" ‚Ä¢ üõ°Ô∏è".concat(e.armor):"",c=a(e.acc),l=a(e.crit),u=a(e.dodge),d=null!=c?" ‚Ä¢ üéØ".concat(c,"%"):"",m=null!=l?" ‚Ä¢ ‚ú∂".concat(l,"%"):"",f=null!=u?" ‚Ä¢ üëü".concat(u,"%"):"",v="".concat(e.hp," PV").concat(e.shield>0?" ‚Ä¢ üõ°".concat(e.shield):"").concat(e.mana>0?" ‚Ä¢ üî∑".concat(e.mana):"").concat(e.atk?" ‚Ä¢ ‚öîÔ∏è".concat(e.atk):"").concat(o).concat(d).concat(m).concat(f),p=i.map(function(e){var t=e&&(e.icon||e.img||e.image);return t?'<img class="item" src="'.concat(s(t),'" title="').concat(e.name||"",'" alt="">'):""}).join(""),g=t.map(function(e){return'<span class="tag" title="'.concat(e.name||e,'">').concat(e.short||e.name||e,"</span>")}).join("");return'<li>\n          <div class="hud-ava"><img src="'.concat(s(e.img),'" alt=""></div>\n          <div class="hud-name">').concat(e.name,'</div>\n          <div class="hud-stats">').concat(v,'</div>\n          <div class="hud-meta">').concat(p).concat(g,"</div>\n        </li>")}).join("")};m.innerHTML=e("ally"),f.innerHTML=e("enemy");var t=function(e){var t=l;e&&e.src!==t&&(e.src=t)};m.querySelectorAll(".hud-ava img").forEach(function(e){e.addEventListener("error",function(){return t(e)})}),f.querySelectorAll(".hud-ava img").forEach(function(e){e.addEventListener("error",function(){return t(e)})})}function U(e){var t=e.el.querySelector(".hp");t&&(t.textContent=e.hp);var n=e.el.querySelector(".shield");n&&(n.textContent=e.shield,n.style.display=e.shield>0?"":"none");var r=e.el.querySelector(".mana");r&&(r.textContent=e.mana,r.style.display=e.mana>0?"":"none");var a=e.el.querySelector(".u-bar--hp > span"),i=e.el.querySelector(".u-bar--mana > span");if(a){var o=Math.max(1,e.maxHp||e.hp||1),c=Math.max(0,Math.min(o,e.hp||0));a.style.width=Math.round(100*c/o)+"%"}if(i){var l=Math.max(0,Math.min(50,e.mana||0));i.style.width=Math.round(100*l/50)+"%"}}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:120;try{if(!e)return;var a=performance.now();if(a-(j.get(n)||0)<r)return;j.set(n,a);var i=new Audio(e);i.volume=t,i.play().catch(function(){})}catch(e){}}function z(e){return e?(Array.isArray(e)?e:[e]).map(function(e){return e}):[]}function G(e){return e?(Array.isArray(e)?e:[e]).map(function(e){return"string"==typeof e?{name:e,short:String(e).slice(0,3).toUpperCase()}:e}):[]}function $(e){var t=new Map,n=new Map;if(!Array.isArray(e))return{byId:t,byName:n};var r,a=o(e);try{for(a.s();!(r=a.n()).done;){var i,c,l,s,u,d,m,f,v=r.value,p=null!==(i=null!==(c=null==v?void 0:v.id)&&void 0!==c?c:null==v?void 0:v.unit_id)&&void 0!==i?i:null==v?void 0:v.girl_id,g=null!==(l=null==v?void 0:v.name)&&void 0!==l?l:null==v?void 0:v.girl_name,y={items:z(null!==(s=null!==(u=null==v?void 0:v.items)&&void 0!==u?u:null==v?void 0:v.item)&&void 0!==s?s:null==v?void 0:v.item_id),families:G(null!==(d=null==v?void 0:v.families)&&void 0!==d?d:null==v?void 0:v.family),focus_y:null!==(m=null!==(f=null==v?void 0:v.focus_y)&&void 0!==f?f:null==v?void 0:v.focusY)&&void 0!==m?m:null==v?void 0:v.foc_y};null!=p&&t.set(String(p),y),g&&n.set(String(g).toLowerCase(),y)}}catch(e){a.e(e)}finally{a.f()}return{byId:t,byName:n}}function V(){u.querySelectorAll(".cell").forEach(function(e){return e.innerHTML=""}),d.innerHTML="",L.clear();var e,t=o(S.initial);try{var n=function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.value),n="ally"===t.team?q:B,r=n.byId.get(String(t.id))||(t.name?n.byName.get(String(t.name).toLowerCase()):null)||null;r?(Array.isArray(t.items)||(t.items=r.items||[]),Array.isArray(t.families)||(t.families=r.families||[]),null==t.focus_y&&null!=r.focus_y&&(t.focus_y=r.focus_y)):t.item&&!t.items&&(t.items=z(t.item)),Array.isArray(t.items)&&(t.items=t.items.map(function(e){if("number"==typeof e){var t=String(e);return N.find(function(e){return String(e.id)===t})||N.find(function(e){return String(e.id)==="fc"+t})||{img:P(t)}}if("string"==typeof e){var n=e.trim();if(/^(?:https?:|data:|blob:|\/)/i.test(n)||n.includes("/"))return{img:n};var r=n.replace(/\.[a-z0-9]+$/i,"");return N.find(function(e){return String(e.id)===String(r)})||(/^\d+$/.test(r)?N.find(function(e){return String(e.id)==="fc"+r}):null)||{img:P(n)}}return!e||!e.id||e.img||e.icon||e.image?e:N.find(function(t){return String(t.id)===String(e.id)})||e}));var o=document.createElement("div");o.className="unit unit--".concat(t.team," unit--").concat(t.class);var c=t.focus_y;"number"!=typeof c?c=.2:c>1&&(c/=100),o.innerHTML='\n    <img src="'.concat(s(t.img),'" alt="" style="object-position:center ').concat(Math.round(100*c),'%">\n    <div class="u-bars">\n      <div class="u-bar u-bar--hp"><span></span></div>\n      <div class="u-bar u-bar--mana"><span></span></div>\n    </div>\n  ').concat(Array.isArray(t.items)&&t.items.length?'<div class="u-items">'.concat(t.items.map(function(e){var t=(null==e?void 0:e.icon)||(null==e?void 0:e.img)||(null==e?void 0:e.image)||"";return t?'<img src="'.concat(s(t),'" alt="" title="').concat(e.name||"",'">'):""}).join(""),"</div>"):"");var u=k(t.x,t.y);u&&u.appendChild(o);var d=o.querySelector("img");d&&d.addEventListener("error",function(){var e=l;d.src!==e&&(d.src=e)}),t.el=o,L.set(t.id,t),U(t)};for(t.s();!(e=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}J()}function K(){var e;if(A>=((null===(e=S.actions)||void 0===e?void 0:e.length)||0)){clearInterval(_),_=null;var t="ally"===S.winner?"victory":"enemy"===S.winner?"defeat":"draw";D("victory"===t?"Victoire !":"defeat"===t?"D√©faite‚Ä¶":"√âgalit√© !");var n=document.getElementById("result-overlay"),r=document.getElementById("result-text"),a=document.getElementById("btn-result-continue"),i=document.getElementById("result-sound-toggle");if(n&&r){var o;if(n.classList.remove("is-hidden"),n.classList.toggle("is-victory","victory"===t),n.classList.toggle("is-defeat","defeat"===t),r.textContent="victory"===t?"VICTOIRE":"defeat"===t?"D√âFAITE":"√âGALIT√â",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:900;if(T){I=!0;var t=T.volume,n=performance.now(),r=function(a){if(I){var i=Math.min(1,(a-n)/e);T.volume=t*(1-i),i<1?requestAnimationFrame(r):(T.pause(),T.volume=t,I=!1)}};requestAnimationFrame(r)}}(1200),"victory"===t){var c=window.SFX_VICTORY_URL;if(c)try{var l=new Audio(c);l.volume=.7,l.loop=!1,l.play().catch(function(){})}catch(e){}}else"defeat"===t&&X(window.SFX_DEFEAT_URL,.7,"defeat",200);var u=!1,d=null;i&&i.addEventListener("click",function(){u=!u,i.setAttribute("aria-pressed",u?"true":"false"),u&&function(e){try{if(!u)return;d||(d=new(window.AudioContext||window.webkitAudioContext));var t=d.currentTime;("victory"===e?[523,659,784]:"defeat"===e?[392,349,261]:[440,440,440]).forEach(function(e,n){var r=d.createOscillator(),a=d.createGain();r.type="sine",r.frequency.value=e,r.connect(a),a.connect(d.destination);var i=t+.18*n;a.gain.setValueAtTime(.001,i),a.gain.exponentialRampToValueAtTime(.2,i+.02),a.gain.exponentialRampToValueAtTime(.001,i+.3),r.start(i),r.stop(i+.32)})}catch(e){console.debug("audio failed",e)}}(t)});var m=function(){return n.classList.add("is-hidden")};a&&a.addEventListener("click",m,{once:!0}),null===(o=n.querySelector(".result-veil"))||void 0===o||o.addEventListener("click",m,{once:!0})}}else!function(e){switch(e.t){case"fx":try{var t=Array.isArray(e.at)?e.at:null;if(!t)break;var n=k(t[0],t[1]);if(!n)break;var r=e.kind||"default",a=window.FX_URLS&&window.FX_URLS[r]||window.FX_URLS&&window.FX_URLS.default;if(!a)break;var i=document.createElement("div");i.className="fx fx--"+r;var o=document.createElement("img");o.alt=r,o.src=s(a),i.appendChild(o),n.appendChild(i);var c=Math.max(200,Math.min(4e3,parseInt(e.dur||1e3,10)));setTimeout(function(){i.remove()},c)}catch(e){}break;case"move":var l=L.get(e.id);if(!l)break;var u=k(e.to[0],e.to[1]);if(!u)break;u.appendChild(l.el),l.x=e.to[0],l.y=e.to[1];break;case"attack":var d=L.get(e.att),m=L.get(e.def);if(!d||!m)break;var f=m.hp;if(m.hp=e.hp,m.shield=e.shield,void 0!==e.mana&&(d.mana=e.mana),U(m),U(d),f>0&&m.hp>0){var v=f>(m.maxHp||2*f)/2,p=m.hp<=(m.maxHp||2*f)/2;v&&p&&X(window.SFX_HALFHP_URL,.7,"half:"+m.id,400)}m.hp<=0&&(m.el.classList.add("ko"),setTimeout(function(){return m.el.remove()},120),X(window.SFX_DEATH_URL,.8,"death",150)),e.log&&D(e.log);break;case"heal":var g,y,h=L.get(e.src),b=L.get(e.dst);if(!h||!b)break;void 0!==e.mana&&(h.mana=e.mana),b.hp=Math.min(b.maxHp,(null!==(g=b.hp)&&void 0!==g?g:0)+(null!==(y=e.amount)&&void 0!==y?y:0));var S=!0===e.crit||e.amount&&b.maxHp&&e.amount>=.25*b.maxHp;X(S&&window.SFX_HEAL_CRIT_URL?window.SFX_HEAL_CRIT_URL:window.SFX_HEAL_URL,S?.8:.6,S?"healcrit":"heal",80),U(h),U(b),e.log&&D(e.log);break;case"log":e.msg&&D(e.msg)}}(S.actions[A++]),J()}})},4028:(e,t,n)=>{"use strict";n(7848),n(633),n(5188),n(1738);console.log("This log comes from assets/app.js - welcome to AssetMapper! üéâ")},5188:()=>{document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("mg-roster-track");if(e){var t=document.querySelector(".carousel__nav--prev"),n=document.querySelector(".carousel__nav--next"),r=function(t){return e.scrollBy({left:t,behavior:"smooth"})};null==t||t.addEventListener("click",function(){return r(-280)}),null==n||n.addEventListener("click",function(){return r(280)})}}),console.log("home.js")},7848:(e,t,n)=>{function r(){var e,t,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return a(u,"_invoke",function(n,r,a){var i,o,c,s=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,o=0,c=e,m.n=n,l}};function f(n,r){for(o=n,c=r,t=0;!d&&s&&!a&&t<u.length;t++){var a,i=u[t],f=m.p,v=i[2];n>3?(a=v===r)&&(c=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(o=0,m.v=r,m.n=i[1]):f<v&&(a=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,m.n=v,o=0))}if(a||n>1)return l;throw d=!0,r}return function(a,u,v){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,v),o=u,c=v;(t=o<2?e:c)||!d;){i||(o?o<3?(o>1&&(m.n=-1),f(o,c)):m.n=c:m.v=c);try{if(s=2,i){if(o||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=i.return)&&t.call(i),o<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=e}else if((t=(d=m.n<0)?c:n.call(r,m))!==l)break}catch(t){i=e,o=1,c=t}finally{s=1}}return{value:t,done:d}}}(n,i,o),!0),u}var l={};function s(){}function u(){}function d(){}t=Object.getPrototypeOf;var m=[][i]?t(t([][i]())):(a(t={},i,function(){return this}),t),f=d.prototype=s.prototype=Object.create(m);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,a(f,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,o,"GeneratorFunction"),a(f),a(f,o,"Generator"),a(f,i,function(){return this}),a(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:c,m:v}})()}function a(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}a=function(e,t,n,r){function o(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},a(e,t,n,r)}function i(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function c(e){i(o,r,a,c,l,"next",e)}function l(e){i(o,r,a,c,l,"throw",e)}c(void 0)})}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,c=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n(2675),n(9463),n(2259),n(6280),n(6918),n(8706),n(2008),n(113),n(1629),n(3418),n(4423),n(4346),n(3792),n(2062),n(4114),n(4782),n(5086),n(4554),n(739),n(3288),n(4170),n(2010),n(3110),n(6033),n(2892),n(9085),n(9904),n(4185),n(5506),n(875),n(9432),n(3548),n(287),n(6099),n(3362),n(7495),n(906),n(8781),n(1415),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(1699),n(7764),n(5440),n(1392),n(8992),n(4520),n(2577),n(3949),n(1454),n(7550),n(3500),n(2953),n(6031),n(3296),n(7208),n(8408),n(4603),n(7566),n(8721),document.addEventListener("DOMContentLoaded",function(){var e,t=(window.ASSET_BASE||"/").replace(/\/?$/,"/"),n=function(e){return t+String(e||"").replace(/^\/+/,"")},a=window.matchMedia&&window.matchMedia("(pointer: coarse)").matches||"ontouchstart"in window;console.log("Team Builder script loaded!",{ASSET_BASE:t});var i=document.getElementById("owned-girls-json"),d=document.getElementById("suggested-girls-json");if(i){var m=JSON.parse(i.textContent||"[]"),f=d?JSON.parse(d.textContent||"[]"):[],v=document.getElementById("pick-grid"),p=document.getElementById("bench-grid"),g=document.getElementById("board"),y=document.getElementById("items-grid"),h=document.getElementById("items-bench"),b=document.querySelector('[data-js="bench-count"]'),S=document.querySelector('[data-js="bench-capacity"]'),w=document.getElementById("btn-reroll"),E=document.getElementById("reroll-count"),L=document.getElementById("btn-lock"),_=document.getElementById("team-bonuses"),A=document.getElementById("search-skeleton"),T=document.querySelector(".tb-hint"),x=Number(window.SEED||0),I=null,M=new Map,k=new Map,C=Array.isArray(window.ITEMS)?window.ITEMS:[],O="application/x-tft-item";S&&(S.textContent=String(12));var j=function(e){return"tb.picks.".concat(e)},q=function(){try{return JSON.parse(localStorage.getItem("tb.itemsBench")||"[]")}catch(e){return[]}}();h&&h.addEventListener("click",function(e){"item"===B.type&&B.data&&($(B.data)&&K())});var B={type:null,data:null,el:null},N=function(e){return Math.floor(Math.random()*e)},P=function(e,t){return"".concat(e,",").concat(t)},H=function(e){if(!e.length)return[];if(e.length<=4)return u(e);for(var t=new Set,n=[];n.length<4&&t.size<e.length;){var r=N(e.length);t.has(r)||(t.add(r),n.push(e[r]))}return n}(C);g.addEventListener("dragover",function(e){return e.preventDefault()}),g.addEventListener("drop",function(e){e.preventDefault();var t=e.target.closest(".cell");if(t){var n=t.dataset,r=n.x,a=n.y,i=P(r,a);if(document.querySelector(".tb-card.dragging, .chip.dragging, .tb-item.dragging")){var o=e.dataTransfer.getData("text/plain")||"{}",s={};try{s=JSON.parse(o)}catch(e){}if(!s||"item"!==s.__type){var u,d=l(M);try{for(d.s();!(u=d.n()).done;){var m=c(u.value,2),f=m[0];if(m[1].girl.id===s.id){M.delete(f);var v=g.querySelector('.cell[data-x="'.concat(f.split(",")[0],'"][data-y="').concat(f.split(",")[1],'"]'));v&&(v.innerHTML="")}}}catch(e){d.e(e)}finally{d.f()}if(M.has(i)||!(M.size>=4)){if(M.has(i)){var y=M.get(i);null!=y&&y.el&&(p.appendChild(Y(y.girl,{source:"bench"})),k.set(y.girl.id,p.lastElementChild)),M.delete(i)}var h=W(s);t.innerHTML="",t.appendChild(h),M.set(i,{girl:s,el:h,itemId:null}),Q()}}}}}),g.addEventListener("click",function(e){var t=e.target.closest(".cell");if(t)if("girl"!==B.type)if("item"!==B.type);else{var r=P(t.dataset.x,t.dataset.y),a=M.get(r);if(!a)return;a.itemId=B.data.id;var i=a.el.querySelector(".chip-item"),o=(window.ITEMS||[]).find(function(e){return String(e.id)===String(B.data.id)});if(i&&o){var s=o.desc?"".concat(o.name," ‚Äî ").concat(o.desc):o.name;i.innerHTML='<img class="chip-item-img" src="'.concat(n(o.img),'" alt="').concat(o.name,'" title="').concat(s,'">');var u=i.querySelector(".chip-item-img");u&&(u.classList.add("flash"),setTimeout(function(){return u.classList.remove("flash")},600))}K()}else{var d=function(e,t){if(!t)return!1;var n,r=t.dataset,a=r.x,i=r.y,o=P(a,i),s=l(M);try{for(s.s();!(n=s.n()).done;){var u=c(n.value,2),d=u[0];if(u[1].girl.id===e.id){M.delete(d);var m=g.querySelector('.cell[data-x="'.concat(d.split(",")[0],'"][data-y="').concat(d.split(",")[1],'"]'));m&&(m.innerHTML="")}}}catch(e){s.e(e)}finally{s.f()}if(!M.has(o)&&M.size>=4)return!1;if(M.has(o)){var f=M.get(o);null!=f&&f.el&&(p.appendChild(Y(f.girl,{source:"bench"})),k.set(f.girl.id,p.lastElementChild)),M.delete(o)}var v=W(e);return t.innerHTML="",t.appendChild(v),M.set(o,{girl:e,el:v,itemId:null}),Q(),!0}(B.data,t);d&&K()}}),document.addEventListener("click",function(e){var t,n;(null===(t=(n=e.target).closest)||void 0===t?void 0:t.call(n,".tb-card, .tb-item, .tb-board .cell, .tb-board, .tb-pick__grid, .tb-bench__grid"))||K()}),p.addEventListener("dragover",function(e){var t;((null===(t=e.dataTransfer)||void 0===t?void 0:t.types)||[]).includes(O)||e.preventDefault()}),p.addEventListener("drop",function(e){e.preventDefault();var t={};try{t=JSON.parse(e.dataTransfer.getData("text/plain")||"{}")}catch(e){t={}}if(!t||"item"!==t.__type){var n,r=t,a=l(M);try{for(a.s();!(n=a.n()).done;){var i=c(n.value,2),o=i[0];if(i[1].girl.id===r.id){var s=g.querySelector('.cell[data-x="'.concat(o.split(",")[0],'"][data-y="').concat(o.split(",")[1],'"]'));s&&(s.innerHTML=""),M.delete(o);break}}}catch(e){a.e(e)}finally{a.f()}if(r&&null!=r.id){if(!k.has(r.id)){var u=Y(r,{source:"bench"});p.appendChild(u),k.set(r.id,u)}Q()}}}),h&&(h.addEventListener("dragover",function(e){var t,n=(null===(t=e.dataTransfer)||void 0===t?void 0:t.types)||[];(n.includes(O)||n.includes("text/plain"))&&(e.preventDefault(),h.classList.add("is-dropping"))}),h.addEventListener("dragleave",function(){return h.classList.remove("is-dropping")}),h.addEventListener("drop",function(e){h.classList.remove("is-dropping");var t=e.dataTransfer;if(t){var n=null;if(t.types.includes(O))try{n=JSON.parse(t.getData(O))}catch(e){}if(!n)try{var r=JSON.parse(t.getData("text/plain")||"{}");r&&"item"===r.__type&&(n=G(z(r.id)||{id:r.id,img:"images/items/fc".concat(r.id,".png"),name:""}))}catch(e){}if(n&&n.id)if(q.some(function(e){return String(e.id)===String(n.id)})){var a=h.querySelector('.bench-item[data-id="'.concat(String(n.id),'"]'));a&&(a.classList.add("dragging"),setTimeout(function(){return a.classList.remove("dragging")},350))}else q.length>=12||(q.push({id:n.id,img:n.icon||n.img,name:n.name||""}),X(),V())}})),g.addEventListener("drop",function(e){var t=e.dataTransfer.getData("text/plain")||"";if(t){var r;try{r=JSON.parse(t)}catch(e){r=null}if(r&&"item"===r.__type){var a=e.target.closest(".cell");if(a){var i=P(a.dataset.x,a.dataset.y),o=M.get(i);if(o){o.itemId=r.id;var c=o.el.querySelector(".chip-item"),l=(window.ITEMS||[]).find(function(e){return String(e.id)===String(r.id)});if(c&&l){var s=l.desc?"".concat(l.name," ‚Äî ").concat(l.desc):l.name;c.innerHTML='<img class="chip-item-img" src="'.concat(n(l.img),'" alt="').concat(l.name,'" title="').concat(s,'">');var u=c.querySelector(".chip-item-img");u&&(u.classList.add("flash"),setTimeout(function(){return u.classList.remove("flash")},600))}I&&l&&(I.textContent="".concat(l.name," ‚Üí ").concat(o.girl.name),setTimeout(function(){I&&(I.style.display="none")},850))}}}}}),document.addEventListener("dragover",function(e){I&&"block"===I.style.display&&(I.style.left="".concat(e.clientX,"px"),I.style.top="".concat(e.clientY,"px"))});var D=null,R=null;L.addEventListener("click",o(r().m(function e(){var t,n,a,i,l,s,u,d,m,f,v,p,g,y;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return A&&(A.classList.remove("is-hidden"),A.classList.add("is-visible")),l=Array.from(M.entries()).map(function(e){var t,n=c(e,2),r=n[0],a=n[1],i=c(r.split(",").map(Number),2),o=i[0],l=i[1],s=null!==(t=a.itemId)&&void 0!==t?t:null;return s?{id:a.girl.id,x:o,y:l,item:String(s)}:{id:a.girl.id,x:o,y:l}}),s=null!==(t=null===(n=window.MM)||void 0===n?void 0:n.start)&&void 0!==t?t:"/matchmaking/start",u=null!==(a=null===(i=window.MM)||void 0===i?void 0:i.status)&&void 0!==a?a:"/matchmaking/status/__ID__",d=function(e){return u.replace("__ID__",String(e))},console.log("Calling START_URL =",s),e.p=1,e.n=2,fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({lineup:l})});case 2:return m=e.v,e.n=3,m.text();case 3:f=e.v;try{v=JSON.parse(f)}catch(e){v=null}if(console.log("matchmaking/start ->",m.status,null!=v?v:f),m.ok){e.n=4;break}return alert("Matchmaking failed (".concat(m.status,"):\n").concat(null!==(p=null===(g=v)||void 0===g?void 0:g.error)&&void 0!==p?p:f)),e.a(2);case 4:if(v&&("matched"===v.status||"queued"===v.status)){e.n=5;break}return alert("R√©ponse inattendue:\n"+(v?JSON.stringify(v):f)),e.a(2);case 5:if("matched"!==v.status){e.n=6;break}return window.location.href="/match/".concat(v.matchId),e.a(2);case 6:D=v.ticketId,L.disabled=!0,L.textContent="üîé Recherche en cours‚Ä¶",R=setInterval(o(r().m(function e(){var t,n;return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch(d(D),{credentials:"same-origin"});case 1:return t=e.v,e.n=2,t.json();case 2:n=e.v,console.log("matchmaking/status ->",n),"matched"===n.status&&(clearInterval(R),A&&(A.classList.remove("is-visible"),A.classList.add("is-hidden")),window.location.href="/match/".concat(n.matchId));case 3:return e.a(2)}},e)})),5e3),e.n=8;break;case 7:e.p=7,y=e.v,console.error(y),alert("Erreur r√©seau: "+y.message),A&&(A.classList.remove("is-visible"),A.classList.add("is-hidden"));case 8:return e.a(2)}},e,null,[[1,7]])}))),function(){v.innerHTML="";var e=f.length?u(f):u(m);if(0===e.length){var t=document.createElement("div");return t.className="tb-items__empty",t.textContent="Aucune h√©ro√Øne disponible pour le tirage.",void v.appendChild(t)}var n=function(e){try{return JSON.parse(localStorage.getItem(j(e))||"null")}catch(e){return null}}(x);if(Array.isArray(n)&&0!==n.length){if("object"!==s(n[0])){var r=new Map([].concat(u(m),u(f)).map(function(e){return[String(e.id),e]}));if((n=n.map(function(e){return r.get(String(e))}).filter(Boolean)).length<4)for(var a=e.filter(function(e){return!n.some(function(t){return t.id===e.id})});n.length<4&&a.length;)n.push(a.shift())}}else{for(var i=new Set(Array.from(k.keys())),o=e.filter(function(e){return!i.has(e.id)});o.length<4;)o.push.apply(o,u(o));n=o.slice(0,4),U(x,n.map(function(e){return e.id}))}n.forEach(function(e){return v.appendChild(Y(e,{source:"pick"}))})}(),function(){if(y){if(y.innerHTML="",!C.length){var e=document.createElement("div");return e.className="tb-items__empty",e.textContent="Ajoute des images dans public/images/items/",void y.appendChild(e)}H.forEach(function(e){var t=document.createElement("button");t.type="button",t.className="tb-item",t.setAttribute("data-item-id",e.id);var r=e.desc?"".concat(e.name," ‚Äî ").concat(e.desc):e.name;t.setAttribute("title",r),t.setAttribute("aria-label",r),t.draggable=!a,t.innerHTML='<img src="'.concat(n(e.img),'" alt="').concat(e.name,'">'),t.addEventListener("dragstart",function(n){t.classList.add("dragging"),n.dataTransfer.setData("text/plain",JSON.stringify({__type:"item",id:e.id})),n.dataTransfer.setData(O,JSON.stringify(G(e)));var r=I||((I=document.createElement("div")).className="drag-tip",Object.assign(I.style,{position:"fixed",zIndex:99999,pointerEvents:"none",background:"rgba(26, 24, 44, 0.9)",color:"#fff",padding:"6px 10px",borderRadius:"10px",border:"1px solid rgba(255,255,255,.2)",boxShadow:"0 6px 20px rgba(0,0,0,.35)",fontSize:"12px",transform:"translate(-50%, -140%)",whiteSpace:"nowrap"}),document.body.appendChild(I),I);r.textContent="".concat(e.name," ‚Üí (d√©pose sur une h√©ro√Øne)"),r.style.display="block"}),t.addEventListener("dragend",function(){t.classList.remove("dragging"),I&&(I.style.display="none")});var i=null,o=function(){i&&(clearTimeout(i),i=null)};t.addEventListener("touchstart",function(){o(),i=setTimeout(function(){t.dataset.longpress="1",$(e)&&h&&(h.classList.add("is-dropping"),setTimeout(function(){return h.classList.remove("is-dropping")},500))},450)},{passive:!0}),t.addEventListener("touchend",function(e){"1"===t.dataset.longpress&&(e.preventDefault(),e.stopPropagation()),o()},{passive:!1}),t.addEventListener("touchcancel",o,{passive:!0}),t.addEventListener("touchmove",o,{passive:!0}),t.addEventListener("click",function(n){if("1"===t.dataset.longpress)return n.preventDefault(),n.stopPropagation(),void(t.dataset.longpress="0");var r,i;t.classList.contains("is-selected")?K():(r=e,i=t,K(),B={type:"item",data:r,el:i},i&&i.classList.add("is-selected"),g.classList.add("is-equipping"),T&&a&&(T.textContent="Tape une h√©ro√Øne pour √©quiper, ou tape le banc d'objets pour stocker."),h&&h.classList.add("is-dropping"))}),y.appendChild(t)})}}(),ee(),V();var F=Number(null!==(e=window.REROLLS_LEFT)&&void 0!==e?e:3),J=function(){E&&(E.textContent="(".concat(F," restant").concat(F>1?"s":"",")")),w&&(w.disabled=F<=0)};J(),w&&w.addEventListener("click",o(r().m(function e(){var t,n,a,i,o;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!(F<=0)){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,fetch(window.REROLL_DEC_URL,{method:"POST",credentials:"same-origin"});case 2:return n=e.v,e.n=3,n.json();case 3:a=e.v,F=Number(null!==(t=null==a?void 0:a.left)&&void 0!==t?t:F),e.n=5;break;case 4:e.p=4,e.v;case 5:J(),U(i=Math.floor(2147483647*Math.random())+1,[]),(o=new URL(window.location.href)).searchParams.set("s",String(i)),window.location.href=o.toString();case 6:return e.a(2)}},e,null,[[1,4]])})))}function U(e,t){try{localStorage.setItem(j(e),JSON.stringify(t))}catch(e){}}function X(){localStorage.setItem("tb.itemsBench",JSON.stringify(q)),b&&(b.textContent=String(q.length))}function z(e){return(window.ITEMS||[]).find(function(t){return String(t.id)===String(e)})}function G(e){return{id:String(e.id),icon:n(e.img),name:e.name||""}}function $(e){if(!e||null==e.id||!h)return!1;if(q.some(function(t){return String(t.id)===String(e.id)})){var t=h.querySelector('.bench-item[data-id="'.concat(String(e.id),'"]'));return t&&(t.classList.add("dragging"),setTimeout(function(){return t.classList.remove("dragging")},350)),!1}return!(q.length>=12)&&(q.push({id:e.id,img:e.img||e.icon,name:e.name||""}),X(),V(),!0)}function V(){h&&(h.innerHTML="",q.forEach(function(e,t){var r,a=document.createElement("div");a.className="bench-item",a.setAttribute("draggable","true"),a.dataset.index=String(t),a.dataset.id=String(e.id),a.title=e.name||"",a.innerHTML='\n        <img class="bench-item__img" alt="" src="'.concat(n(e.img||e.icon),'">\n        <button type="button" class="bench-item__remove" aria-label="Retirer">√ó</button>\n      '),a.addEventListener("dragstart",function(t){var n,r;a.classList.add("dragging");var i=G(z(e.id)||e);null===(n=t.dataTransfer)||void 0===n||n.setData(O,JSON.stringify(i)),null===(r=t.dataTransfer)||void 0===r||r.setData("text/plain",JSON.stringify({__type:"item",id:e.id}))}),a.addEventListener("dragend",function(){return a.classList.remove("dragging")}),null===(r=a.querySelector(".bench-item__remove"))||void 0===r||r.addEventListener("click",function(){q.splice(t,1),X(),V()}),h.appendChild(a)}),X())}function K(){B.el&&B.el.classList.remove("is-selected"),B={type:null,data:null,el:null},g.classList.remove("is-placing","is-equipping"),document.querySelectorAll(".tb-item.is-selected").forEach(function(e){return e.classList.remove("is-selected")}),T&&a&&(T.textContent="Place exactement 4 h√©ro√Ønes."),h&&h.classList.remove("is-dropping")}function Y(e,t){var r,i,o=t.source,c=document.createElement("div");c.className="tb-card tb-card--".concat(e.class),c.draggable=!a,c.dataset.id=e.id,c.dataset.source=o,c.innerHTML='\n      <button class="tb-card__bench-btn" type="button" title="Ajouter au banc" aria-label="Ajouter au banc">üß∫</button>\n      <div class="tb-card__img">\n        <img src="'.concat(n(e.img),'" alt="').concat(e.name,'">\n      </div>\n      <div class="tb-card__meta">\n        <div class="tb-card__name">').concat(e.name,'</div>\n        <div class="tb-card__tags">\n          <span class="tag ').concat(Z(e.class),'">').concat(function(e){switch(e){case"dps_melee":return"DPS C√†C";case"dps_ranged":return"DPS distance";case"tank":return"Tank";case"healer":return"Healer";default:return e}}(e.class),'</span>\n          <span class="tag tag-family">').concat(null!==(r=e.family)&&void 0!==r?r:"",'</span>\n        </div>\n      </div>\n      <div class="tb-card__stats">\n        <span>PV ').concat(e.pdv,"</span>\n        <span>ATK ").concat(e.atk,"</span>\n        <span>PRC ").concat(Math.round(100*(null!==(i=e.chance_atk)&&void 0!==i?i:0)),"%</span>\n      </div>\n    ");var l=c.querySelector(".tb-card__bench-btn");return null==l||l.addEventListener("click",function(t){t.stopPropagation(),c.parentElement!==p&&(p.appendChild(c),k.set(e.id,c),Q())}),c.addEventListener("dragstart",function(t){t.dataTransfer.setData("text/plain",JSON.stringify(e)),requestAnimationFrame(function(){return c.classList.add("dragging")})}),c.addEventListener("dragend",function(){return c.classList.remove("dragging")}),c.addEventListener("click",function(t){var n;"item"!==B.type&&("girl"===B.type&&(null===(n=B.data)||void 0===n?void 0:n.id)===e.id?K():function(e,t){K(),B={type:"girl",data:e,el:t},t&&t.classList.add("is-selected"),g.classList.add("is-placing"),T&&a&&(T.textContent="S√©lectionne une case du plateau pour placer la h√©ro√Øne.")}(e,c))}),c.addEventListener("dblclick",function(){c.parentElement===p?(k.delete(e.id),v?v.appendChild(c):c.remove()):(p.appendChild(c),k.set(e.id,c)),Q()}),c}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=document.createElement("div");r.className="chip ".concat(Z(e.class)),r.title=e.name,r.draggable=!a;var i="number"==typeof e.focus_y?"".concat(e.focus_y,"%"):"10%";r.innerHTML='\n      <img class="chip-avatar" src="'.concat(n(e.img),'" alt="').concat(e.name,'" style="object-position:center ').concat(i,';">\n      <span class="chip-item"></span>\n    ');var o=r.querySelector(".chip-item");if(t){var c=(window.ITEMS||[]).find(function(e){return String(e.id)===String(t)});if(c&&o){var l=c.desc?"".concat(c.name," ‚Äî ").concat(c.desc):c.name;o.innerHTML='<img class="chip-item-img" src="'.concat(n(c.img),'" alt="').concat(c.name,'" title="').concat(l,'">')}}return o&&o.addEventListener("click",function(e){var t;e.stopPropagation();var n=null===(t=r.parentElement)||void 0===t?void 0:t.closest(".cell");if(n){var a=P(n.dataset.x,n.dataset.y),i=M.get(a);i&&(i.itemId=null,o.innerHTML="")}}),r.addEventListener("dragstart",function(t){t.dataTransfer.setData("text/plain",JSON.stringify(e)),requestAnimationFrame(function(){return r.classList.add("dragging")})}),r.addEventListener("dragend",function(){return r.classList.remove("dragging")}),r.addEventListener("click",function(){var t,a=null===(t=r.parentElement)||void 0===t?void 0:t.closest(".cell");if(a)if("item"!==B.type){var i=P(a.dataset.x,a.dataset.y);if(M.delete(i),a.innerHTML="",!k.has(e.id)){var o=Y(e,{source:"bench"});p.appendChild(o),k.set(e.id,o)}Q()}else{var c=P(a.dataset.x,a.dataset.y),l=M.get(c);if(l){l.itemId=B.data.id;var s=r.querySelector(".chip-item"),u=(window.ITEMS||[]).find(function(e){return String(e.id)===String(B.data.id)});if(s&&u){var d=u.desc?"".concat(u.name," ‚Äî ").concat(u.desc):u.name;s.innerHTML='<img class="chip-item-img" src="'.concat(n(u.img),'" alt="').concat(u.name,'" title="').concat(d,'">');var m=s.querySelector(".chip-item-img");m&&(m.classList.add("flash"),setTimeout(function(){return m.classList.remove("flash")},600))}K()}}}),r}function Z(e){switch(e){case"dps_melee":return"tag-melee";case"dps_ranged":return"tag-ranged";case"tank":return"tag-tank";case"healer":return"tag-heal";default:return""}}function Q(){L.disabled=4!==M.size,ee()}function ee(){if(_){var e=function(){var e,t={},n=l(M);try{for(n.s();!(e=n.n()).done;){var r=(c(e.value,2)[1].girl.family||"").toLowerCase();r&&(t[r]=(t[r]||0)+1)}}catch(e){n.e(e)}finally{n.f()}for(var a={},i=0,o=Object.entries(t);i<o.length;i++){var s=c(o[i],2),u=s[0],d=s[1],m=d>=4?4:d>=3?3:d>=2?2:0;0!==m&&(a[u]={n:d,tier:m})}return a}();_.innerHTML="";var t={soleil:"‚òÄÔ∏è",lune:"üåô",nature:"üçÉ",idole:"üéµ",ombre:"üåë",arcane:"‚ú®",etoile:"‚≠ê",ocean:"üåä"};Object.entries(e).forEach(function(e){var n=c(e,2),r=n[0],a=n[1],i=a.tier,o=a.n,l=document.createElement("li");l.className="bonus-item fam-".concat(r," tier-").concat(i);var s=r.charAt(0).toUpperCase()+r.slice(1),u=function(e,t,n){var r={soleil:{2:"ATK +5%",3:"Pr√©cision +5%",4:"Crit +5%"},lune:{2:"Esquive +3%",3:"Esquive +2% & Mana +10",4:"Bouclier +10"},nature:{2:"PV +5%",3:"Bouclier +15",4:"PV +5%"},idole:{2:"Crit +5%",3:"ATK +5%",4:"Mana +10"},ombre:{2:"Esquive +5%",3:"Pr√©cision +5%",4:"Bouclier +15"},arcane:{2:"Pr√©cision +5%",3:"Mana +15",4:"Crit +5%"},etoile:{2:"Pr√©cision +3%",3:"Crit +5%",4:"ATK +5%"},ocean:{2:"Esquive +3%",3:"Mana +10",4:"Pr√©cision +5%"}},a=r[e]&&r[e][t]?r[e][t]:"Palier ".concat(t),i=e.charAt(0).toUpperCase()+e.slice(1);return"".concat(i," x").concat(n," ‚Äî ").concat(a)}(r,i,o).split(" ‚Äî ").pop(),d=Math.min(100,Math.round(o/4*100));l.innerHTML='\n        <span class="fam-icon" aria-hidden="true">'.concat(t[r]||"‚úß",'</span>\n        <span class="fam-name">').concat(s,'</span>\n        <span class="count">x').concat(o,'</span>\n        <div class="gauge" role="progressbar" aria-valuemin="0" aria-valuemax="4" aria-valuenow="').concat(o,'">\n          <div class="bar" style="width:').concat(d,'%"></div>\n        </div>\n        <span class="effect">').concat(u,"</span>\n      "),_.appendChild(l)})}}})}},e=>{e.O(0,[286],()=>{return t=4028,e(e.s=t);var t});e.O()}]);