<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="icon" href="{{ asset('/images/backgrounds/logo.png') }}">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Acceuil{% endblock %}</title>
        {% block stylesheets %}
            {{ encore_entry_link_tags('app') }}
        {% endblock %}

        {% block javascripts %}
            {{ encore_entry_script_tags('app') }}
            {% block importmap %}{{ importmap('app') }}{% endblock %}
        {% endblock %}
    </head>
    <body class="{% block body_class %}{% endblock %}">
        {% block header %}
            <header>
                {% block navbar %}
                    <nav class="navbar" role="navigation" aria-label="Navigation principale">
                        <div class="logo">
                            <img src="{{asset('/images/backgrounds/logo.png')}}" alt="">
                        </div>
                        <button class="menu-toggle" type="button" aria-expanded="false" aria-controls="primary-links auth-links" title="Menu">
                            ‚ò∞
                        </button>
                        
                        <nav id="primary-links" class="nav-links">
                            <a href="{{ path('app_home') }}">Accueil</a>
                        </nav>

                                                <div id="auth-links" class="auth-links">
                            {% if app.user %}
                                                                <span class="mmr-badge" title="MMR actuel">
                                                                        üèÜ MMR: {{ app.user.mmr }}
                                                                        {% if attribute(app.user, 'gamesPlayed') is defined %}
                                                                            <small>({{ app.user.gamesPlayed }} matchs)</small>
                                                                        {% endif %}
                                                                </span>
                                <a href="{{ path('app_team_builder') }}" class="btn btn-primary" >Lancer une partie</a>
                                <a href="{{ path('me_matches') }}" class="btn btn-primary" >Historique</a>
                                <form action="{{ path('app_logout') }}" method="post">
                                
                                <a href="{{ path('app_logout') }}">üö™ D√©connexion</a>
                                </form>
                                {% if is_granted('ROLE_ADMIN') %}
                                    <a href="{{ path('admin') }}">üõ† Administration</a></li>
                                {% endif %}
                            {% else %}
                                <a href="{{ path('app_register') }}">Inscription</a>
                                <a href="{{ path('app_login') }}">Connexion</a>
                            {% endif %}
                        </div>
                    </nav>
                {% endblock %}
            </header>
        {% endblock %}
        {% block main %}{% endblock %}
        {% block footer %}
            <footer>
                <div class="footer-content">
                    <p>&copy; 2025 MagicalArena. Tous droits r√©serv√©s.</p>
                    <p>Con√ßu par 
                        <a href="https://github.com/poutou89">Poutou89</a>
                        <a href="https://github.com/WeskerResidente">Wesker</a>
                    </p>
                    <div class="legal">
                        <ul>
                            <li><a class="btn" href="{{ path('app_cgu') }}">Conditions g√©n√©ral d'utilisation</a></li>
                            <li><a class="btn" href="{{ path('app_cookies') }}">Cookies</a></li>
                            <li><a class="btn" href="{{ path('app_mentions_legales') }}">Mentions l√©gales</a></li>
                            <li><a class="btn" href="{{ path('app_politique_de_confidentialite') }}">Politique de confidentialit√©</a></li>
                        </ul>
                    </div>
            </footer>
        {% endblock %}
    </body>

</html>
 <script>
 document.addEventListener('DOMContentLoaded', () => {
     const navbar = document.querySelector('.navbar');
     const toggle  = document.querySelector('.menu-toggle');
     if (navbar && toggle) {
         toggle.addEventListener('click', () => {
             const opened = navbar.classList.toggle('is-open');
             toggle.setAttribute('aria-expanded', opened ? 'true' : 'false');
         });
         // close on link click (useful on mobile)
         navbar.addEventListener('click', (e) => {
             const a = e.target.closest('a');
             if (!a) return;
             if (window.matchMedia('(max-width: 900px)').matches) {
                 navbar.classList.remove('is-open');
                 toggle.setAttribute('aria-expanded', 'false');
             }
         });
         // close on outside click
         document.addEventListener('click', (e) => {
             if (!navbar.classList.contains('is-open')) return;
             if (navbar.contains(e.target) || toggle.contains(e.target)) return;
             if (window.matchMedia('(max-width: 900px)').matches) {
                 navbar.classList.remove('is-open');
                 toggle.setAttribute('aria-expanded', 'false');
             }
         });
         // close on Escape key
         document.addEventListener('keydown', (e) => {
             if (e.key !== 'Escape') return;
             if (!navbar.classList.contains('is-open')) return;
             navbar.classList.remove('is-open');
             toggle.setAttribute('aria-expanded', 'false');
             toggle.focus();
         });
     }
 });
 </script>
