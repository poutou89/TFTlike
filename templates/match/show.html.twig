{% extends 'base.html.twig' %}

{% block title %}Match #{{ match_id }}{% endblock %}
{% block body_class %}page-match{% endblock %}

{% block main %}
<section class="match container">
  <header class="match__header">
    <h1>Match #{{ match_id }}</h1>
    <div class="match__controls">
      <button class="btn btn-primary" id="btn-start">‚ñ∂ D√©marrer</button>
      <button class="btn btn-ghost"   id="btn-pause">‚è∏ Pause</button>
        <button class="btn btn-ghost"   id="btn-reset">‚Ü∫ Reset</button>
    </div>
  </header>

  <div class="match__layout">
    <aside class="hud hud--left">
      <h3>Alli√©s</h3>
      <ul id="hud-allies"></ul>
    </aside>

    <main class="board-wrap">
      <div class="board" id="board" data-cols="7" data-rows="4">
        {% for r in 0..3 %}
          {% for c in 0..6 %}
            <div class="cell" data-x="{{ c }}" data-y="{{ r }}"></div>
          {% endfor %}
        {% endfor %}
      </div>
      <div class="log" id="battle-log"></div>
    </main>

    <aside class="hud hud--right">
      <h3>Ennemis</h3>
      <ul id="hud-enemies"></ul>
    </aside>
  </div>
</section>

{# Overlay r√©sultat victoire/d√©faite #}
<div id="result-overlay" class="result-overlay is-hidden" role="dialog" aria-modal="true" aria-live="assertive">
  <div class="result-frame">
    <button class="sound-toggle" id="result-sound-toggle" title="Activer/D√©sactiver le son" aria-pressed="false">üîä</button>
    <div class="result-text" id="result-text">VICTOIRE</div>
    <div class="result-actions">
      <button class="btn btn-primary" id="btn-result-continue">Continuer</button>
    </div>
    <div class="result-stars" aria-hidden="true">
      <span class="tw"></span><span class="tw"></span><span class="tw"></span>
      <span class="tw"></span><span class="tw"></span><span class="tw"></span>
      <span class="tw"></span><span class="tw"></span><span class="tw"></span>
    </div>
  </div>
  <div class="result-veil" aria-hidden="true"></div>
</div>

  <script id="allies-json"  type="application/json">{{ allies  |json_encode()|raw }}</script>
  <script id="enemies-json" type="application/json">{{ enemies |json_encode()|raw }}</script>
  <script>window.ASSET_BASE = "{{ asset('') }}";</script>
  <script id="replay-json" type="application/json">{{ replay|json_encode()|raw }}</script>
{% endblock %}
{# templates/match/show.html.twig #}
{% block javascripts %}
  {{ parent() }}   {# <= garde seulement l‚Äôentr√©e "app" #}
{% endblock %}
